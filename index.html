<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year 2026 - Magical Greeting</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Sofia&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE10+/Edge */
            user-select: none; /* Standard */
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: #0a0a0a;
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            cursor: default;
        }
        
        /* Disable right-click context menu */
        body * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* ADSTERRA AD SLOTS - Top */
        /* ADSTERRA_AD_SLOT - TOP */
        .ad-slot {
            width: 100%;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            margin: 0 auto;
            border-radius: 5px;
            border: 1px dashed rgba(255, 215, 0, 0.3);
            color: #ffd700;
            font-size: 14px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .ad-top {
            margin-top: 10px;
            margin-bottom: 20px;
        }
        
        /* Curtain Opening Effect */
        .curtain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #0f0c29, #302b63, #24243e);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 1.5s ease-in-out;
        }
        
        .curtain.open {
            transform: translateY(-100%);
        }
        
        .curtain-text {
            font-family: 'Sofia', cursive;
            font-size: 2.8rem;
            text-align: center;
            color: #ffd700;
            text-shadow: 0 0 10px #ffd700, 0 0 20px #ffd700;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }
        
        .open-btn {
            background: linear-gradient(45deg, #ffd700, #ffaa00);
            color: #0a0a0a;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            font-family: 'Montserrat', sans-serif;
        }
        
        .open-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        }
        
        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
        }
        
        h1 {
            font-family: 'Sofia', cursive;
            font-size: 3.5rem;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            margin-bottom: 10px;
        }
        
        .tagline {
            font-size: 1.2rem;
            color: #a0a0a0;
            margin-bottom: 30px;
        }
        
        /* Countdown Timer */
        .countdown-container {
            background: rgba(20, 20, 30, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin: 30px auto;
            max-width: 700px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 0 20px rgba(0, 150, 255, 0.2);
        }
        
        .countdown-title {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 20px;
            color: #4fc3f7;
        }
        
        .countdown {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .countdown-item {
            text-align: center;
            min-width: 100px;
        }
        
        .countdown-number {
            font-size: 2.8rem;
            font-weight: 700;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .countdown-label {
            margin-top: 8px;
            font-size: 0.9rem;
            color: #a0a0a0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* ADSTERRA AD SLOTS - Middle */
        /* ADSTERRA_AD_SLOT - MIDDLE */
        .ad-middle {
            margin: 30px auto;
        }
        
        /* Personalization Section */
        .personalization {
            background: rgba(30, 30, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin: 30px auto;
            max-width: 800px;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
            font-family: 'Sofia', cursive;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 8px;
            color: #4fc3f7;
            font-weight: 600;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 1rem;
            font-family: 'Montserrat', sans-serif;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .photo-upload {
            text-align: center;
            padding: 20px;
            border: 2px dashed rgba(255, 215, 0, 0.5);
            border-radius: 10px;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .upload-btn {
            background: linear-gradient(45deg, #4fc3f7, #0288d1);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .upload-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.7);
        }
        
        .upload-info {
            font-size: 0.9rem;
            color: #a0a0a0;
            margin-top: 10px;
        }
        
        /* Greeting Card */
        .greeting-card {
            background: rgba(20, 20, 30, 0.9);
            border-radius: 20px;
            padding: 25px;
            margin: 30px auto;
            max-width: 600px;
            border: 3px solid rgba(255, 215, 0, 0.5);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .year-frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .year-text {
            font-family: 'Sofia', cursive;
            font-size: 8rem;
            color: rgba(255, 215, 0, 0.1);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            pointer-events: none;
        }
        
        .user-photo-container {
            width: 250px;
            height: 250px;
            margin: 0 auto 20px;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            position: relative;
            z-index: 2;
            background: rgba(0, 0, 0, 0.7);
        }
        
        #userPhoto {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #a0a0a0;
            font-size: 0.9rem;
        }
        
        .photo-placeholder i {
            font-size: 3rem;
            margin-bottom: 10px;
            color: #ffd700;
        }
        
        .greeting-text {
            text-align: center;
            font-size: 1.5rem;
            color: white;
            margin-top: 20px;
            position: relative;
            z-index: 2;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
        }
        
        .user-name {
            color: #ffd700;
            font-weight: 700;
        }
        
        /* Music Player */
        .music-player {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }
        
        .music-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(20, 20, 30, 0.9);
            border: 2px solid #ffd700;
            color: #ffd700;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.3rem;
            transition: all 0.3s;
        }
        
        .music-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }
        
        /* Share Button */
        .share-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }
        
        .share-btn {
            background: linear-gradient(45deg, #25D366, #128C7E);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.4);
        }
        
        .share-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 7px 20px rgba(37, 211, 102, 0.6);
        }
        
        /* ADSTERRA AD SLOTS - Bottom */
        /* ADSTERRA_AD_SLOT - BOTTOM */
        .ad-bottom {
            margin: 30px auto 80px;
        }
        
        /* Fireworks Animation */
        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            box-shadow: 0 0 10px #ffd700;
        }
        
        /* Confetti Effect */
        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 20px;
            opacity: 0.8;
            font-weight: 700;
            color: #ffd700;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.7);
        }
        
        /* Animations */
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .countdown-number {
                font-size: 2rem;
                padding: 10px;
            }
            
            .countdown-item {
                min-width: 70px;
            }
            
            .curtain-text {
                font-size: 2rem;
            }
            
            .music-player {
                top: 10px;
                right: 10px;
            }
            
            .share-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .user-photo-container {
                width: 200px;
                height: 200px;
            }
            
            .year-text {
                font-size: 6rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }
            
            .countdown {
                gap: 5px;
            }
            
            .countdown-number {
                font-size: 1.5rem;
            }
            
            .countdown-item {
                min-width: 60px;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .user-photo-container {
                width: 180px;
                height: 180px;
            }
            
            .year-text {
                font-size: 5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Curtain Opening Effect -->
    <div class="curtain" id="curtain">
        <div class="curtain-text">Welcome to Your Magical<br>New Year 2026 Greeting!</div>
        <button class="open-btn" id="openCurtainBtn">
            <i class="fas fa-gift"></i> Open Your Gift
        </button>
    </div>
    
    <!-- Music Player -->
    <div class="music-player">
        <button class="music-btn" id="musicToggle">
            <i class="fas fa-play" id="musicIcon"></i>
        </button>
        <audio id="backgroundMusic" loop>
            <source src="https://assets.mixkit.co/music/preview/mixkit-happy-new-year-2026-1164.mp3" type="audio/mp3">
            Your browser does not support the audio element.
        </audio>
    </div>
    
    <!-- ADSTERRA AD SLOT - TOP -->
    <div class="container">
        <div class="ad-slot ad-top">
            <!-- Adsterra/AdSense Ad Code Here -->
            Ad Slot: 728x90 or 320x100
        </div>
        
        <header>
            <h1>Happy New Year 2026</h1>
            <p class="tagline">Create your personalized magical greeting and share with friends & family!</p>
        </header>
        
        <!-- Countdown Timer -->
        <div class="countdown-container">
            <h2 class="countdown-title">Countdown to 2026</h2>
            <div class="countdown" id="countdown">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">00</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="countdown-label">Seconds</div>
                </div>
            </div>
        </div>
        
        <!-- ADSTERRA AD SLOT - MIDDLE -->
        <div class="ad-slot ad-middle">
            <!-- Adsterra/AdSense Ad Code Here -->
            Ad Slot: 300x250 or 336x280
        </div>
        
        <!-- Personalization Section -->
        <div class="personalization">
            <h2 class="section-title">Personalize Your Greeting</h2>
            
            <div class="input-group">
                <label class="input-label" for="userName">Enter Your Name:</label>
                <input type="text" id="userName" placeholder="e.g. Rahul" maxlength="30">
            </div>
            
            <div class="photo-upload">
                <button class="upload-btn" id="uploadBtn">
                    <i class="fas fa-cloud-upload-alt"></i> Upload Your Photo
                </button>
                <input type="file" id="photoInput" accept="image/*" style="display: none;">
                <p class="upload-info">Upload a photo to appear in the 2026 greeting card</p>
            </div>
            
            <div class="input-group">
                <label class="input-label">Your Personalized Link:</label>
                <input type="text" id="personalizedLink" readonly placeholder="Enter your name and upload a photo to generate your link">
            </div>
        </div>
        
        <!-- Greeting Card -->
        <div class="greeting-card">
            <div class="year-frame">
                <div class="year-text">2026</div>
            </div>
            
            <div class="user-photo-container" id="photoContainer">
                <div class="photo-placeholder" id="photoPlaceholder">
                    <i class="fas fa-user-circle"></i>
                    <span>Your photo will appear here</span>
                </div>
                <img id="userPhoto" style="display: none;">
            </div>
            
            <div class="greeting-text">
                Wishing <span class="user-name" id="displayName">[Your Name]</span> a magical and prosperous New Year 2026 filled with joy, success, and happiness! üéâ
            </div>
        </div>
        
        <!-- ADSTERRA AD SLOT - BOTTOM -->
        <div class="ad-slot ad-bottom">
            <!-- Adsterra/AdSense Ad Code Here -->
            Ad Slot: 728x90 or 320x100
        </div>
    </div>
    
    <!-- Share Button -->
    <div class="share-container">
        <button class="share-btn" id="shareBtn">
            <i class="fab fa-whatsapp"></i> Share on WhatsApp
        </button>
    </div>
    
    <!-- Fireworks and Confetti Containers -->
    <div class="fireworks" id="fireworks"></div>
    <div class="confetti" id="confetti"></div>
    
    <script>
        // ============== DOM Elements ==============
        const curtain = document.getElementById('curtain');
        const openCurtainBtn = document.getElementById('openCurtainBtn');
        const musicToggle = document.getElementById('musicToggle');
        const musicIcon = document.getElementById('musicIcon');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const countdownDays = document.getElementById('days');
        const countdownHours = document.getElementById('hours');
        const countdownMinutes = document.getElementById('minutes');
        const countdownSeconds = document.getElementById('seconds');
        const userNameInput = document.getElementById('userName');
        const uploadBtn = document.getElementById('uploadBtn');
        const photoInput = document.getElementById('photoInput');
        const photoContainer = document.getElementById('photoContainer');
        const photoPlaceholder = document.getElementById('photoPlaceholder');
        const userPhoto = document.getElementById('userPhoto');
        const displayName = document.getElementById('displayName');
        const personalizedLink = document.getElementById('personalizedLink');
        const shareBtn = document.getElementById('shareBtn');
        const fireworksContainer = document.getElementById('fireworks');
        const confettiContainer = document.getElementById('confetti');
        
        // ============== Global Variables ==============
        let userName = '';
        let userPhotoUrl = '';
        let photoUploaded = false;
        let apiKey = 'YOUR_IMGBB_API_KEY_HERE'; // Replace with your imgBB API key
        
        // ============== Disable Right-Click & Text Selection ==============
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            alert('Right-click is disabled to protect the content.');
        });
        
        // ============== Curtain Opening Effect ==============
        openCurtainBtn.addEventListener('click', function() {
            curtain.classList.add('open');
            // Start animations after curtain opens
            setTimeout(() => {
                createFireworks();
                createConfetti();
            }, 500);
        });
        
        // ============== Music Player ==============
        musicToggle.addEventListener('click', function() {
            if (backgroundMusic.paused) {
                backgroundMusic.play();
                musicIcon.classList.remove('fa-play');
                musicIcon.classList.add('fa-pause');
            } else {
                backgroundMusic.pause();
                musicIcon.classList.remove('fa-pause');
                musicIcon.classList.add('fa-play');
            }
        });
        
        // Auto-play music with user interaction
        document.addEventListener('click', function initMusic() {
            if (backgroundMusic.paused) {
                backgroundMusic.volume = 0.5;
                backgroundMusic.play().then(() => {
                    musicIcon.classList.remove('fa-play');
                    musicIcon.classList.add('fa-pause');
                }).catch(e => console.log("Auto-play prevented:", e));
            }
            document.removeEventListener('click', initMusic);
        });
        
        // ============== Countdown Timer ==============
        function updateCountdown() {
            const now = new Date();
            const newYear2026 = new Date('January 1, 2026 00:00:00');
            const timeLeft = newYear2026 - now;
            
            if (timeLeft < 0) {
                // New Year has arrived!
                countdownDays.textContent = '00';
                countdownHours.textContent = '00';
                countdownMinutes.textContent = '00';
                countdownSeconds.textContent = '00';
                return;
            }
            
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            countdownDays.textContent = days.toString().padStart(2, '0');
            countdownHours.textContent = hours.toString().padStart(2, '0');
            countdownMinutes.textContent = minutes.toString().padStart(2, '0');
            countdownSeconds.textContent = seconds.toString().padStart(2, '0');
        }
        
        setInterval(updateCountdown, 1000);
        updateCountdown(); // Initial call
        
        // ============== User Name Input ==============
        userNameInput.addEventListener('input', function() {
            userName = userNameInput.value.trim();
            displayName.textContent = userName || '[Your Name]';
            updatePersonalizedLink();
        });
        
        // ============== Photo Upload ==============
        uploadBtn.addEventListener('click', function() {
            photoInput.click();
        });
        
        photoInput.addEventListener('change', function() {
            if (photoInput.files && photoInput.files[0]) {
                const file = photoInput.files[0];
                
                // Validate file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size should be less than 5MB');
                    return;
                }
                
                // Show loading state
                photoPlaceholder.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>Uploading...</span>';
                
                // Upload to imgBB
                uploadToImgBB(file);
            }
        });
        
        // ============== imgBB API Integration ==============
        async function uploadToImgBB(file) {
            const formData = new FormData();
            formData.append('image', file);
            
            // Note: Replace 'YOUR_IMGBB_API_KEY_HERE' with your actual imgBB API key
            const apiUrl = `https://api.imgbb.com/1/upload?key=${apiKey}`;
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    userPhotoUrl = data.data.url;
                    photoUploaded = true;
                    
                    // Display the uploaded photo
                    userPhoto.src = userPhotoUrl;
                    userPhoto.style.display = 'block';
                    photoPlaceholder.style.display = 'none';
                    
                    updatePersonalizedLink();
                    alert('Photo uploaded successfully!');
                } else {
                    throw new Error(data.error.message || 'Upload failed');
                }
            } catch (error) {
                console.error('Upload error:', error);
                photoPlaceholder.innerHTML = '<i class="fas fa-exclamation-circle"></i><span>Upload failed. Try again.</span>';
                
                // Fallback: Use a local preview if API fails
                const reader = new FileReader();
                reader.onload = function(e) {
                    userPhotoUrl = e.target.result;
                    photoUploaded = true;
                    userPhoto.src = userPhotoUrl;
                    userPhoto.style.display = 'block';
                    photoPlaceholder.style.display = 'none';
                    updatePersonalizedLink();
                };
                reader.readAsDataURL(file);
            }
        }
        
        // ============== Personalized Link Generation ==============
        function updatePersonalizedLink() {
            if (userName || photoUploaded) {
                const baseUrl = window.location.href.split('?')[0];
                const params = new URLSearchParams();
                
                if (userName) params.append('name', userName);
                if (photoUploaded && userPhotoUrl) params.append('img', userPhotoUrl);
                
                const fullUrl = `${baseUrl}?${params.toString()}`;
                personalizedLink.value = fullUrl;
            } else {
                personalizedLink.value = 'Enter your name and upload a photo to generate your link';
            }
        }
        
        // ============== WhatsApp Sharing ==============
        shareBtn.addEventListener('click', function() {
            if (!userName && !photoUploaded) {
                alert('Please enter your name and/or upload a photo before sharing.');
                return;
            }
            
            const shareMessage = `${userName || 'Someone'} has sent you a magical New Year gift! üéÅ Click here to see and create yours: ${personalizedLink.value}`;
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareMessage)}`;
            
            window.open(whatsappUrl, '_blank');
        });
        
        // ============== Fireworks Animation ==============
        function createFireworks() {
            // Clear existing fireworks
            fireworksContainer.innerHTML = '';
            
            // Create multiple fireworks
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    createFirework();
                }, i * 300);
            }
            
            // Continue creating fireworks periodically
            setInterval(() => {
                if (Math.random() > 0.5) createFirework();
            }, 800);
        }
        
        function createFirework() {
            const firework = document.createElement('div');
            firework.className = 'firework';
            
            // Random position
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            
            // Random color
            const colors = ['#ffd700', '#4fc3f7', '#ff4081', '#76ff03'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            firework.style.left = `${x}vw`;
            firework.style.top = `${y}vh`;
            firework.style.backgroundColor = color;
            firework.style.boxShadow = `0 0 10px ${color}, 0 0 20px ${color}`;
            
            fireworksContainer.appendChild(firework);
            
            // Animate the firework
            const animation = firework.animate([
                { transform: 'scale(0.5)', opacity: 1 },
                { transform: 'scale(1.5)', opacity: 0.5 },
                { transform: 'scale(2.5)', opacity: 0 }
            ], {
                duration: 1000,
                easing: 'ease-out'
            });
            
            animation.onfinish = () => firework.remove();
        }
        
        // ============== Confetti Animation ==============
        function createConfetti() {
            // Clear existing confetti
            confettiContainer.innerHTML = '';
            
            // Create confetti pieces
            for (let i = 0; i < 50; i++) {
                const confettiPiece = document.createElement('div');
                confettiPiece.className = 'confetti-piece';
                confettiPiece.textContent = Math.random() > 0.5 ? '2026' : 'üéâ';
                
                // Random properties
                const left = Math.random() * 100;
                const size = 10 + Math.random() * 15;
                const color = Math.random() > 0.5 ? '#ffd700' : '#4fc3f7';
                const rotation = Math.random() * 360;
                const fallDuration = 2000 + Math.random() * 3000;
                const delay = Math.random() * 2000;
                
                confettiPiece.style.left = `${left}vw`;
                confettiPiece.style.fontSize = `${size}px`;
                confettiPiece.style.color = color;
                confettiPiece.style.transform = `rotate(${rotation}deg)`;
                
                confettiContainer.appendChild(confettiPiece);
                
                // Animate falling
                setTimeout(() => {
                    confettiPiece.style.animation = `fall ${fallDuration}ms linear forwards`;
                    
                    // Remove after animation
                    setTimeout(() => {
                        if (confettiPiece.parentNode) {
                            confettiPiece.remove();
                        }
                    }, fallDuration);
                }, delay);
            }
            
            // Continue creating confetti
            setInterval(createConfetti, 5000);
        }
        
        // ============== Check URL Parameters ==============
        function checkUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const nameParam = urlParams.get('name');
            const imgParam = urlParams.get('img');
            
            if (nameParam) {
                userName = decodeURIComponent(nameParam);
                userNameInput.value = userName;
                displayName.textContent = userName;
            }
            
            if (imgParam) {
                userPhotoUrl = decodeURIComponent(imgParam);
                photoUploaded = true;
                userPhoto.src = userPhotoUrl;
                userPhoto.style.display = 'block';
                photoPlaceholder.style.display = 'none';
            }
            
            updatePersonalizedLink();
        }
        
        // ============== Initialize ==============
        window.addEventListener('DOMContentLoaded', function() {
            checkUrlParams();
            updateCountdown();
            
            // Start animations after a short delay
            setTimeout(() => {
                if (curtain.classList.contains('open')) {
                    createFireworks();
                    createConfetti();
                }
            }, 1000);
        });
    </script>
</body>
</html>
